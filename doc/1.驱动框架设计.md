# 驱动框架

## § 代码结构分层

+ 代码结构分层好处
    + 有组织的安排代码编写的文件；
    + 分层结构能简化代码开发；
+ 代码分层设计：测试层 -> fat层 -> disk层
    + 测试层：使用文件读写接口；实现文件的读写测试；
    + fat层：使用设备读写接口；实现设备上FAT数据的解析；实现文件读写接口，如file_read等；
    + disk层：抽象存储设备结构；包含设备属性及相关操作；
+ 实现原理
    + 设备特性：块大小、块数量
    + 操作接口：打开、关闭、块的读取、块的写入
+ 具体实现
    + 定义基本数据类型和错误码；
    + 定义设备类结构，定义操作接口结构；
    + 添加驱动实例；

